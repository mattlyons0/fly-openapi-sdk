# fly-sdk-ruby

FlySDK - the Ruby gem for the Machines API

# Introduction

Fly Machines are the compute behind the Fly.io platform. They are fast-launching VMs that can be started and stopped at subsecond speeds. A Machine is the configuration and state for a single VM running on our platform. Every Machine will belong to a Fly App; Apps can have more than one Machine. Read more [here](https://fly.io/docs/machines/).

The Machines REST API allows you to provison and manage Apps, Machines and Volumes on the Fly.io platform. To manage other Fly.io resources like organizations, use the [GraphQL API](https://fly.io/docs/networking/custom-domains-with-fly/#graphql-api-notes).

## Authentication

All requests must include the Fly API Token in the HTTP Headers as follows:

```
Authorization: Bearer [TOKEN]
```

You can get your API token using [flyctl](https://fly.io/docs/hands-on/install-flyctl/) by running `fly auth token`

## Base URL

The easiest (and recommended) way to connect to the Machines API is to use the public `api.machines.dev` endpoint, a simpler and more performant alternative to connecting over WireGuard. You can still access your Machines directly over a WireGuard VPN, and use the private Machines API endpoint: `http://_api.internal:4280`. This method requires more setup.

Follow the [instructions](https://fly.io/docs/networking/private-networking/#private-network-vpn) to set up a permanent WireGuard connection to your Fly.io [IPv6 private network](https://fly.io/docs/networking/private-networking/). Once youâ€™re connected, Fly internal DNS should expose the Machines API endpoint at: `http://_api.internal:4280`

## Response Codes

The API uses conventional HTTP status codes to signal whether a request was successful or not.

Typically, 2xx HTTP status codes denote successful operations, 4xx codes imply failures related to the user, and 5xx codes suggest problems with the infrastructure.

| Status | Description                                 |
| :----: | ------------------------------------------- |
| `200`  | Successful request.                         |
| `201`  | Created successfully.                       |
| `202`  | Successful request. No content.             |
| `400`  | Check that the parameters were correct.     |
| `401`  | The API key used was missing or invalid.    |
| `404`  | The resource was not found.                 |
| `5xx`  | Indicates an error with Fly.io API servers. |


This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 1.0
- Package version: 1.0.0
- Build package: org.openapitools.codegen.languages.RubyClientCodegen

## Installation

### Build a gem

To build the Ruby code into a gem:

```shell
gem build fly-sdk-ruby.gemspec
```

Then either install the gem locally:

```shell
gem install ./fly-sdk-ruby-1.0.0.gem
```

(for development, run `gem install --dev ./fly-sdk-ruby-1.0.0.gem` to install the development dependencies)

or publish the gem to a gem hosting service, e.g. [RubyGems](https://rubygems.org/).

Finally add this to the Gemfile:

    gem 'fly-sdk-ruby', '~> 1.0.0'

### Install from Git

If the Ruby gem is hosted at a git repository: https://github.com/GIT_USER_ID/GIT_REPO_ID, then add the following in the Gemfile:

    gem 'fly-sdk-ruby', :git => 'https://github.com/GIT_USER_ID/GIT_REPO_ID.git'

### Include the Ruby code directly

Include the Ruby code directly using `-I` as follows:

```shell
ruby -Ilib script.rb
```

## Getting Started

Please follow the [installation](#installation) procedure and then run the following code:

```ruby
# Load the gem
require 'fly-sdk-ruby'

api_instance = FlySDK::AppsApi.new
request = FlySDK::CreateAppRequest.new # CreateAppRequest | App body

begin
  #Create App
  api_instance.apps_create(request)
rescue FlySDK::ApiError => e
  puts "Exception when calling AppsApi->apps_create: #{e}"
end

```

## Documentation for API Endpoints

All URIs are relative to *https://api.machines.dev/v1*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*FlySDK::AppsApi* | [**apps_create**](docs/AppsApi.md#apps_create) | **POST** /apps | Create App
*FlySDK::AppsApi* | [**apps_delete**](docs/AppsApi.md#apps_delete) | **DELETE** /apps/{app_name} | Destroy App
*FlySDK::AppsApi* | [**apps_list**](docs/AppsApi.md#apps_list) | **GET** /apps | List Apps
*FlySDK::AppsApi* | [**apps_show**](docs/AppsApi.md#apps_show) | **GET** /apps/{app_name} | Get App
*FlySDK::MachinesApi* | [**machines_cordon**](docs/MachinesApi.md#machines_cordon) | **POST** /apps/{app_name}/machines/{machine_id}/cordon | Cordon Machine
*FlySDK::MachinesApi* | [**machines_create**](docs/MachinesApi.md#machines_create) | **POST** /apps/{app_name}/machines | Create Machine
*FlySDK::MachinesApi* | [**machines_create_lease**](docs/MachinesApi.md#machines_create_lease) | **POST** /apps/{app_name}/machines/{machine_id}/lease | Create Lease
*FlySDK::MachinesApi* | [**machines_delete**](docs/MachinesApi.md#machines_delete) | **DELETE** /apps/{app_name}/machines/{machine_id} | Destroy Machine
*FlySDK::MachinesApi* | [**machines_delete_metadata**](docs/MachinesApi.md#machines_delete_metadata) | **DELETE** /apps/{app_name}/machines/{machine_id}/metadata/{key} | Delete Metadata
*FlySDK::MachinesApi* | [**machines_exec**](docs/MachinesApi.md#machines_exec) | **POST** /apps/{app_name}/machines/{machine_id}/exec | Execute Command
*FlySDK::MachinesApi* | [**machines_list**](docs/MachinesApi.md#machines_list) | **GET** /apps/{app_name}/machines | List Machines
*FlySDK::MachinesApi* | [**machines_list_events**](docs/MachinesApi.md#machines_list_events) | **GET** /apps/{app_name}/machines/{machine_id}/events | List Events
*FlySDK::MachinesApi* | [**machines_list_processes**](docs/MachinesApi.md#machines_list_processes) | **GET** /apps/{app_name}/machines/{machine_id}/ps | List Processes
*FlySDK::MachinesApi* | [**machines_list_versions**](docs/MachinesApi.md#machines_list_versions) | **GET** /apps/{app_name}/machines/{machine_id}/versions | List Versions
*FlySDK::MachinesApi* | [**machines_release_lease**](docs/MachinesApi.md#machines_release_lease) | **DELETE** /apps/{app_name}/machines/{machine_id}/lease | Release Lease
*FlySDK::MachinesApi* | [**machines_restart**](docs/MachinesApi.md#machines_restart) | **POST** /apps/{app_name}/machines/{machine_id}/restart | Restart Machine
*FlySDK::MachinesApi* | [**machines_show**](docs/MachinesApi.md#machines_show) | **GET** /apps/{app_name}/machines/{machine_id} | Get Machine
*FlySDK::MachinesApi* | [**machines_show_lease**](docs/MachinesApi.md#machines_show_lease) | **GET** /apps/{app_name}/machines/{machine_id}/lease | Get Lease
*FlySDK::MachinesApi* | [**machines_show_metadata**](docs/MachinesApi.md#machines_show_metadata) | **GET** /apps/{app_name}/machines/{machine_id}/metadata | Get Metadata
*FlySDK::MachinesApi* | [**machines_signal**](docs/MachinesApi.md#machines_signal) | **POST** /apps/{app_name}/machines/{machine_id}/signal | Signal Machine
*FlySDK::MachinesApi* | [**machines_start**](docs/MachinesApi.md#machines_start) | **POST** /apps/{app_name}/machines/{machine_id}/start | Start Machine
*FlySDK::MachinesApi* | [**machines_stop**](docs/MachinesApi.md#machines_stop) | **POST** /apps/{app_name}/machines/{machine_id}/stop | Stop Machine
*FlySDK::MachinesApi* | [**machines_uncordon**](docs/MachinesApi.md#machines_uncordon) | **POST** /apps/{app_name}/machines/{machine_id}/uncordon | Uncordon Machine
*FlySDK::MachinesApi* | [**machines_update**](docs/MachinesApi.md#machines_update) | **POST** /apps/{app_name}/machines/{machine_id} | Update Machine
*FlySDK::MachinesApi* | [**machines_update_metadata**](docs/MachinesApi.md#machines_update_metadata) | **POST** /apps/{app_name}/machines/{machine_id}/metadata/{key} | Update Metadata
*FlySDK::MachinesApi* | [**machines_wait**](docs/MachinesApi.md#machines_wait) | **GET** /apps/{app_name}/machines/{machine_id}/wait | Wait for State
*FlySDK::VolumesApi* | [**create_volume_snapshot**](docs/VolumesApi.md#create_volume_snapshot) | **POST** /apps/{app_name}/volumes/{volume_id}/snapshots | Create Snapshot
*FlySDK::VolumesApi* | [**volume_delete**](docs/VolumesApi.md#volume_delete) | **DELETE** /apps/{app_name}/volumes/{volume_id} | Destroy Volume
*FlySDK::VolumesApi* | [**volumes_create**](docs/VolumesApi.md#volumes_create) | **POST** /apps/{app_name}/volumes | Create Volume
*FlySDK::VolumesApi* | [**volumes_extend**](docs/VolumesApi.md#volumes_extend) | **PUT** /apps/{app_name}/volumes/{volume_id}/extend | Extend Volume
*FlySDK::VolumesApi* | [**volumes_get_by_id**](docs/VolumesApi.md#volumes_get_by_id) | **GET** /apps/{app_name}/volumes/{volume_id} | Get Volume
*FlySDK::VolumesApi* | [**volumes_list**](docs/VolumesApi.md#volumes_list) | **GET** /apps/{app_name}/volumes | List Volumes
*FlySDK::VolumesApi* | [**volumes_list_snapshots**](docs/VolumesApi.md#volumes_list_snapshots) | **GET** /apps/{app_name}/volumes/{volume_id}/snapshots | List Snapshots
*FlySDK::VolumesApi* | [**volumes_update**](docs/VolumesApi.md#volumes_update) | **POST** /apps/{app_name}/volumes/{volume_id} | Update Volume


## Documentation for Models

 - [FlySDK::ApiDNSConfig](docs/ApiDNSConfig.md)
 - [FlySDK::ApiDnsOption](docs/ApiDnsOption.md)
 - [FlySDK::ApiFile](docs/ApiFile.md)
 - [FlySDK::ApiHTTPOptions](docs/ApiHTTPOptions.md)
 - [FlySDK::ApiHTTPResponseOptions](docs/ApiHTTPResponseOptions.md)
 - [FlySDK::ApiMachineCheck](docs/ApiMachineCheck.md)
 - [FlySDK::ApiMachineConfig](docs/ApiMachineConfig.md)
 - [FlySDK::ApiMachineGuest](docs/ApiMachineGuest.md)
 - [FlySDK::ApiMachineHTTPHeader](docs/ApiMachineHTTPHeader.md)
 - [FlySDK::ApiMachineInit](docs/ApiMachineInit.md)
 - [FlySDK::ApiMachineMetrics](docs/ApiMachineMetrics.md)
 - [FlySDK::ApiMachineMount](docs/ApiMachineMount.md)
 - [FlySDK::ApiMachinePort](docs/ApiMachinePort.md)
 - [FlySDK::ApiMachineProcess](docs/ApiMachineProcess.md)
 - [FlySDK::ApiMachineRestart](docs/ApiMachineRestart.md)
 - [FlySDK::ApiMachineService](docs/ApiMachineService.md)
 - [FlySDK::ApiMachineServiceConcurrency](docs/ApiMachineServiceConcurrency.md)
 - [FlySDK::ApiProxyProtoOptions](docs/ApiProxyProtoOptions.md)
 - [FlySDK::ApiStatic](docs/ApiStatic.md)
 - [FlySDK::ApiStopConfig](docs/ApiStopConfig.md)
 - [FlySDK::ApiTLSOptions](docs/ApiTLSOptions.md)
 - [FlySDK::App](docs/App.md)
 - [FlySDK::CheckStatus](docs/CheckStatus.md)
 - [FlySDK::CreateAppRequest](docs/CreateAppRequest.md)
 - [FlySDK::CreateLeaseRequest](docs/CreateLeaseRequest.md)
 - [FlySDK::CreateMachineRequest](docs/CreateMachineRequest.md)
 - [FlySDK::CreateVolumeRequest](docs/CreateVolumeRequest.md)
 - [FlySDK::ErrorResponse](docs/ErrorResponse.md)
 - [FlySDK::ExtendVolumeRequest](docs/ExtendVolumeRequest.md)
 - [FlySDK::ExtendVolumeResponse](docs/ExtendVolumeResponse.md)
 - [FlySDK::ImageRef](docs/ImageRef.md)
 - [FlySDK::Lease](docs/Lease.md)
 - [FlySDK::ListApp](docs/ListApp.md)
 - [FlySDK::ListAppsResponse](docs/ListAppsResponse.md)
 - [FlySDK::ListenSocket](docs/ListenSocket.md)
 - [FlySDK::Machine](docs/Machine.md)
 - [FlySDK::MachineEvent](docs/MachineEvent.md)
 - [FlySDK::MachineExecRequest](docs/MachineExecRequest.md)
 - [FlySDK::MachineVersion](docs/MachineVersion.md)
 - [FlySDK::MainStatusCode](docs/MainStatusCode.md)
 - [FlySDK::Organization](docs/Organization.md)
 - [FlySDK::ProcessStat](docs/ProcessStat.md)
 - [FlySDK::SignalRequest](docs/SignalRequest.md)
 - [FlySDK::StopRequest](docs/StopRequest.md)
 - [FlySDK::UpdateMachineRequest](docs/UpdateMachineRequest.md)
 - [FlySDK::UpdateVolumeRequest](docs/UpdateVolumeRequest.md)
 - [FlySDK::Volume](docs/Volume.md)
 - [FlySDK::VolumeSnapshot](docs/VolumeSnapshot.md)


## Documentation for Authorization

Endpoints do not require authorization.

